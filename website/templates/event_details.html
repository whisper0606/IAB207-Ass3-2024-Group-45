{% extends "base.html" %}

{% block content %}
    <!--MAIN CONTENT-->
    <main>
        <div class="container text-center mt-5">
            <h1>{{ event.name }}</h1>
            <p class="lead">Australia's premier multi-genre music extravaganza, set to electrify {{ event.venue }}!</p>
        </div>

        <!-- Event Details Section -->
        <div class="container mt-4">
            <div class="row">
                <div class="col-md-6">
                    <img src="{{ url_for('static', filename='event_images/' + event.image) }}" class="img-fluid rounded" alt="{{ event.name }}">
                </div>
                <div class="col-md-6">
                    <h2>Event Details</h2>
                    <p><strong>Date & Time:</strong> {{ event.datetime }} </p>
                    <p><strong>Location:</strong> {{ event.venue }}</p>
                    <p><strong>Category:</strong> {{ event.genre }}</p>
                    <p><strong>Status:</strong> {{ event.status }}</p>
                    <p><strong>Prices:</strong> Starting from ${{ event.ticket_price }}</p>
                    <h5>Featured Artists:</h5>
                    <ul>
                        {% for artist in event.artists %}
                            <li>{{ artist.name }}</li>
                        {% endfor %}
                    </ul>
                    <h5>Contact Information:</h5>
                    <p><strong>Email:</strong> {{ event.contact_email }}</p>
                    <p><strong>Phone:</strong> {{ event.contact_phone }}</p>
                </div>
            </div>
        </div>

        <!-- Comment Section -->
        <div class="container mt-5">
            <h3>Comments</h3>
            {% for comment in event.comments %}
                <div class="card mt-3">
                    <div class="card-body">
                        <h5 class="card-title">{{ comment.first_name }} {{ comment.last_name }}</h5>
                        <p class="card-text">{{ comment.text }}</p>
                        <p class="card-text"><small class="text-muted">Posted {{ comment.timestamp }}</small></p>
                    </div>
                </div>
            {% endfor %}

            <form class="mt-4" method="POST" action="{{ url_for('event.comment', id=event.id) }}">
                {{ form.hidden_tag() }}
                <label for="comment" class="form-label">Leave a comment</label>
                <textarea class="form-control" id="comment" name="comment" placeholder="Add your comment..." rows="3"></textarea>
                <button type="submit" class="btn btn-primary mt-2">Post Comment</button>
            </form>
        </div>

        <!-- Booking Section -->
        <div class="container mt-5">
            <h2>Book Tickets</h2>
            <form>
                <div class="mb-3">
                    <label for="ticketType" class="form-label">Ticket Type</label>
                    <select class="form-select" id="ticketType">
                        <option value="general">General Admission</option>
                        <option value="vip">VIP</option>
                    </select>
                </div>
                <div class="mb-3">
                    <label for="eventCategory" class="form-label">Genre</label>
                    <select class="form-select" id="eventCategory" required>
                        <option value="">Select a genre</option>
                        <option value="rock">Rock/Alternative</option>
                        <option value="pop">Pop</option>
                        <option value="electronic">Electronic/Dance</option>
                        <option value="hiphop">Hip-Hop/R&B</option>
                    </select>
                </div>
                <div class="mb-3">
                    <label for="ticketQuantity" class="form-label">Quantity</label>
                    <input type="number" class="form-control" id="ticketQuantity" name="quantity" min="1" max="10" value="1">
                </div>
                <button type="submit" class="btn btn-primary mb-5">Confirm Booking</button>
            </form>
        </div>
    </main>

{% endblock %}